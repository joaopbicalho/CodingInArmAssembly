.global _start
_start:
	LDR R0, = 0xff200000
	LDR R1, = 0xfffec600
	LDR R7, = 0xff200050
	LDR R2, = 50000000
	STR R2, [R1]
	MOV R2, #0b011
	STR R2, [R1, #8]
	MOV R3, #0b1000000000
	MOV R5, #0b0000000001
	MOV R6, #0b0
WAIT: 
	LDR R8, [R7]
	CMP R8, #8
	BEQ INNER
	B WAIT2
LOOP:
	LDR R8, [R7]
	CMP R8, #8
	BEQ WAIT
	STR R6, [R0]
	BEQ WAIT2
WAIT2:
	LDR R4, [R1, #12]
	CMP R4, #0
	BEQ LOOP
INNER:
	LDR R4, [R1, #12]
	CMP R4, #0
	BEQ INNER
	
	STR R4, [R1, #12]
	
	CMP R8, #0
	LSREQ R3, R3, #1
	LSLEQ R5, R5, #1
	ORREQ R6, R3, R5
	
	CMP R3, #0b0000100000
	LSREQ R3, R3, #1
	LSLEQ R5, R5, #1
	CMP R3, #0b0000000001
	BNE LOOP
	MOV R3, #0b1000000000
	MOV R5, #0b0000000001
	B LOOP
